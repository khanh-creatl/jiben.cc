-- DNK-Style Cam Lock for Mobile (Da Hood/Hood Z) - 2025
-- Features: Simple GUI with black ON/OFF button, red "DNK" loading animation, invisible FOV, lock by aiming + ON button, red highlight through walls
-- Usage: Aim at target, tap ON to lock head (follows movement), tap OFF to stop, target highlighted red

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse() -- Virtual mouse for mobile

local CamLockEnabled = false
local Target = nil
local FOVRadius = 100 -- Bán kính lock, tối ưu mobile
local Prediction = 0.14 -- Giảm lag
local Highlight = nil -- Highlight đỏ

-- Loading Effect: Mờ màn hình + text đỏ "DNK" 1s
local ScreenGui = Instance.new("ScreenGui")
local Blur = Instance.new("BlurEffect")
Blur.Size = 20
Blur.Parent = game.Lighting
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(1, 0, 1, 0)
Frame.BackgroundColor3 = Color3.new(0, 0, 0)
Frame.BackgroundTransparency = 0.6
Frame.Parent = ScreenGui
local TextLabel = Instance.new("TextLabel")
TextLabel.Size = UDim2.new(0, 150, 0, 50)
TextLabel.Position = UDim2.new(0.5, -75, 0.5, -25)
TextLabel.BackgroundTransparency = 1
TextLabel.Text = "DNK"
TextLabel.TextColor3 = Color3.new(1, 0, 0) -- Đỏ
TextLabel.TextScaled = true
TextLabel.Font = Enum.Font.GothamBold
TextLabel.Parent = Frame
ScreenGui.Parent = game.CoreGui

-- Flash 1s rồi mất
wait(1)
TweenService:Create(Blur, TweenInfo.new(0.5), {Size = 0}):Play()
Frame:TweenSize(UDim2.new(0, 0, 0, 0), "Out", "Quad", 0.5, true, function()
    ScreenGui:Destroy()
    print("Loading done! Script by DNK") -- TB console
end)

-- Simple GUI: Chỉ button ON/OFF
local Gui = Instance.new("ScreenGui")
Gui.Name = "DNKGui"
Gui.Parent = game.CoreGui
local FrameGui = Instance.new("Frame")
FrameGui.Size = UDim2.new(0, 100, 0, 80) -- Nhỏ gọn
FrameGui.Position = UDim2.new(0.02, 0, 0.02, 0) -- Góc trên trái
FrameGui.BackgroundColor3 = Color3.new(0, 0, 0)
FrameGui.BackgroundTransparency = 0.3
FrameGui.Parent = Gui
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "DNK"
Title.TextColor3 = Color3.new(1, 0, 0)
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold
Title.Parent = FrameGui
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 80, 0, 30)
ToggleButton.Position = UDim2.new(0.1, 0, 0.5, 0)
ToggleButton.BackgroundColor3 = Color3.new(0, 0, 0)
ToggleButton.Text = "OFF"
ToggleButton.TextColor3 = Color3.new(1, 1, 1)
ToggleButton.TextScaled = true
ToggleButton.Font = Enum.Font.Gotham
ToggleButton.Parent = FrameGui

-- Tìm player gần nhất tại tâm màn hình
local function GetClosestPlayer()
    local Closest, Shortest = nil, FOVRadius
    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer and Player.Character and Player.Character:FindFirstChild("Head") and Player.Character:FindFirstChild("HumanoidRootPart") then
            local ScreenPos, OnScreen = Camera:WorldToViewportPoint(Player.Character.Head.Position)
            local Dist = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(ScreenPos.X, ScreenPos.Y)).Magnitude
            if OnScreen and Dist < Shortest then
                Closest = Player
                Shortest = Dist
            end
        end
    end
    return Closest
end

-- Lock camera vào head
local function LockCamera()
    if Target and Target.Character and Target.Character:FindFirstChild("Head") then
        local Head = Target.Character.Head
        local Predicted = Head.Position + (Head.AssemblyLinearVelocity * Prediction)
        local Direction = (Predicted - Camera.CFrame.Position).Unit
        Camera.CFrame = Camera.CFrame:Lerp(CFrame.lookAt(Camera.CFrame.Position, Camera.CFrame.Position + Direction), 0.3)
    end
end

-- Highlight đỏ xuyên tường
local function UpdateHighlight()
    if Highlight then Highlight:Destroy() end
    if Target and Target.Character then
        Highlight = Instance.new("Highlight")
        Highlight.FillColor = Color3.new(1, 0, 0) -- Đỏ
        Highlight.OutlineColor = Color3.new(1, 0, 0)
        Highlight.FillTransparency = 0.5
        Highlight.OutlineTransparency = 0
        Highlight.Adornee = Target.Character
        Highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- Xuyên tường
        Highlight.Parent = Target.Character
    end
end

-- Toggle logic
ToggleButton.MouseButton1Click:Connect(function()
    CamLockEnabled = not CamLockEnabled
    ToggleButton.Text = CamLockEnabled and "ON" or "OFF"
    if CamLockEnabled then
        Target = GetClosestPlayer()
        if Target then
            print("Locked on: " .. Target.Name)
            UpdateHighlight()
        end
    else
        Target = nil
        if Highlight then Highlight:Destroy() end
        print("DNK Cam Lock: OFF")
    end
end)

-- Main loop
RunService.Heartbeat:Connect(function()
    if CamLockEnabled and Target then
        LockCamera()
        UpdateHighlight()
    end
end)

-- Cleanup
Players.PlayerRemoving:Connect(function(P)
    if P == Target then
        Target = nil
        if Highlight then Highlight:Destroy() end
    end
end)

print("DNK Cam Lock Loaded! Aim at target, tap ON button to lock (red highlight).")

-- DNK-Style Cam Lock for Mobile (Da Hood/Hood Z) - 2025
-- Features: GUI toggle ON/OFF, red text loading, blur effect, mobile-friendly
-- Toggle: Tap button in GUI or press virtual key (check executor)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse() -- Virtual mouse for mobile

local CamLockEnabled = false
local Target = nil
local FOVRadius = 100 -- Nhỏ hơn cho mobile
local Prediction = 0.14 -- Giảm lag trên mobile

-- GUI Lib (Rayfield, tương thích mobile)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
    Name = "DNK Cam Lock Mobile",
    LoadingTitle = "DNK Loader",
    LoadingSubtitle = "by DNK",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DNKHubMobile",
        FileName = "dahood_mobile"
    },
    KeySystem = false
})

-- Loading Effect: Mờ màn hình + text đỏ "DNK" 1s
local ScreenGui = Instance.new("ScreenGui")
local Blur = Instance.new("BlurEffect")
Blur.Size = 20 -- Nhẹ hơn cho mobile
Blur.Parent = game.Lighting
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(1, 0, 1, 0)
Frame.BackgroundColor3 = Color3.new(0, 0, 0)
Frame.BackgroundTransparency = 0.6
Frame.Parent = ScreenGui
local TextLabel = Instance.new("TextLabel")
TextLabel.Size = UDim2.new(0, 150, 0, 50) -- Nhỏ hơn cho mobile
TextLabel.Position = UDim2.new(0.5, -75, 0.5, -25)
TextLabel.BackgroundTransparency = 1
TextLabel.Text = "DNK"
TextLabel.TextColor3 = Color3.new(1, 0, 0) -- Đỏ
TextLabel.TextScaled = true
TextLabel.Font = Enum.Font.GothamBold
TextLabel.Parent = Frame
ScreenGui.Parent = game.CoreGui

-- Flash 1s rồi mất
wait(1)
TweenService:Create(Blur, TweenInfo.new(0.5), {Size = 0}):Play()
Frame:TweenSize(UDim2.new(0, 0, 0, 0), "Out", "Quad", 0.5, true, function()
    ScreenGui:Destroy()
    print("Loading done! Script by DNK") -- TB console
end)

-- FOV Circle (visualize, nhẹ cho mobile)
local FOVCircle = Drawing.new("Circle")
FOVCircle.Visible = false
FOVCircle.Radius = FOVRadius
FOVCircle.Color = Color3.new(1, 0, 0)
FOVCircle.Thickness = 1 -- Mỏng hơn
FOVCircle.Filled = false
FOVCircle.Transparency = 0.7

-- Tìm target gần nhất
local function GetClosestPlayer()
    local Closest, Shortest = nil, FOVRadius
    for _, Player in pairs(Players:GetPlayers()) do
        if Player ~= LocalPlayer and Player.Character and Player.Character:FindFirstChild("Head") and Player.Character:FindFirstChild("HumanoidRootPart") then
            local ScreenPos, OnScreen = Camera:WorldToViewportPoint(Player.Character.Head.Position)
            local Dist = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(ScreenPos.X, ScreenPos.Y)).Magnitude
            if OnScreen and Dist < Shortest then
                Closest = Player
                Shortest = Dist
            end
        end
    end
    return Closest
end

-- Lock camera vào head
local function LockCamera()
    if Target and Target.Character and Target.Character:FindFirstChild("Head") then
        local Head = Target.Character.Head
        local Predicted = Head.Position + (Head.AssemblyLinearVelocity * Prediction)
        local Direction = (Predicted - Camera.CFrame.Position).Unit
        Camera.CFrame = Camera.CFrame:Lerp(CFrame.lookAt(Camera.CFrame.Position, Camera.CFrame.Position + Direction), 0.3) -- Mượt hơn
    end
end

-- GUI: Button ON/OFF
local MainTab = Window:CreateTab("Cam Lock", 4483362458)
MainTab:CreateToggle({
    Name = "Cam Lock (Head)",
    CurrentValue = false,
    Flag = "CamLockEnabled",
    Callback = function(Value)
        CamLockEnabled = Value
        FOVCircle.Visible = Value
        if Value then
            print("DNK Cam Lock: ON")
        else
            print("DNK Cam Lock: OFF")
            Target = nil
        end
    end
})

-- FOV Slider
MainTab:CreateSlider({
    Name = "FOV Radius",
    Range = {50, 200},
    Increment = 10,
    CurrentValue = 100,
    Flag = "FOVRadius",
    Callback = function(Value)
        FOVRadius = Value
    end
})

-- Main loop
RunService.Heartbeat:Connect(function()
    FOVCircle.Position = Vector2.new(Mouse.X, Mouse.Y)
    FOVCircle.Radius = FOVRadius
    if CamLockEnabled then
        Target = GetClosestPlayer()
        if Target then LockCamera() end
    end
end)

-- Cleanup
Players.PlayerRemoving:Connect(function(P) if P == Target then Target = nil end end)

print("DNK Mobile Cam Lock Loaded! Tap button to toggle.")
